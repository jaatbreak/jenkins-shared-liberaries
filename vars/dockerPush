def call(String image, String tag) {
    // Use Jenkins credentials with the ID 'dockerhub_secret'
    withCredentials([usernamePassword(credentialsId: 'dockerhub_secret', usernameVariable: 'DOCKER_USERNAME', passwordVariable: 'DOCKER_PASSWORD')]) {
        sh """
            echo ${DOCKER_PASSWORD} | docker login -u ${DOCKER_USERNAME} --password-stdin
        """
        sh """
            docker tag ${image}:${tag} ${DOCKER_USERNAME}/${image}:${tag}
            docker push ${DOCKER_USERNAME}/${image}:${tag}
        """
        sh "docker logout"
    }
}
